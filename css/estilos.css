/* ============================
   Óptica Cristal – Dashboard
   estilos.css
   ============================ */

/* --------- Variables --------- */
:root{
  --bg:#0b1220;         /* fondo general */
  --panel:#0f172a;      /* tarjetas/paneles */
  --muted:#334155;      /* bordes/labels */
  --text:#e5e7eb;       /* texto */
  --soft:#94a3b8;       /* texto secundario */
  --primary:#22c55e;    /* botón principal */

  /* Semáforo */
  --verde:#38c172;
  --celeste:#00CFFF;
  --amarillo:#FFD700;
  --rojo:#FF4D4D;
  --gris:#6b7280;

  --row:#0b1326;        /* filas impares */
  --rowAlt:#0c152c;     /* filas pares */
}

/* --------- Reset básico --------- */
*{ box-sizing: border-box; }
html,body{ height:100%; margin:0; }
body{
  background:var(--bg);
  color:var(--text);
  font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* --------- Layout general --------- */
.wrap{ max-width:1200px; margin:0 auto; padding:16px; }
header{ display:grid; gap:12px; grid-template-columns:1fr; margin-bottom:12px; }

.card{
  background:var(--panel);
  border:1px solid #1e293b;
  border-radius:14px;
  padding:12px;
  box-shadow:0 2px 16px rgba(0,0,0,.25);
}

.toolbar{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }

/* --------- Controles --------- */
input, select, button{
  background:#0b1326;
  border:1px solid #1f2a44;
  color:var(--text);
  border-radius:10px;
  padding:8px 10px;
  outline:none;
}
input::placeholder{ color:#7085a3; }
button{ cursor:pointer; }

button.primary{
  background:linear-gradient(180deg,#22c55e,#16a34a);
  border-color:#0f3b23;
  font-weight:600;
}
button.ghost{ background:transparent; }

/* --------- Badges / utilidades --------- */
.kpi{ display:flex; gap:12px; align-items:center; color:var(--soft); }
.kpi b{ color:var(--text); }

.pill{
  background:#0b1326;
  border:1px solid #20314f;
  padding:.35em .7em;
  border-radius:999px;
}

.muted{ color:var(--soft); }
.right{ text-align:right; }
.mono{ font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace; }
.grow{ flex:1; }
.spacer{ flex:1; }

/* --------- Progreso --------- */
.progress{ display:none; gap:12px; align-items:center; }
.progress.show{ display:flex; }
.spinner{
  display:inline-block;
  width:16px; height:16px;
  border:2px solid #284064;
  border-top-color:#93c5fd;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{ to{ transform:rotate(1turn); } }

/* --------- Tabla --------- */
.tableWrap{
  height: calc(100vh - 190px);
  min-height:360px;
  overflow:auto;
  border:1px solid #1e293b;
  border-radius:12px;
}

table{ width:100%; border-collapse:separate; border-spacing:0; }

thead th{
  position:sticky; top:0; z-index:2;
  background:#0a1222;
  text-align:left;
  padding:10px 8px;
  font-weight:600;
  font-size:12px;
  color:#9fb3d1;
  border-bottom:1px solid #1e293b;
}

tbody td{
  padding:10px 8px;
  border-bottom:1px solid #14223b;
  white-space:nowrap;
}

tbody tr:nth-child(odd){ background:var(--row); }
tbody tr:nth-child(even){ background:var(--rowAlt); }

/* --------- Semáforo por fecha/estado --------- */
tbody tr.verde   { background: color-mix(in oklab, var(--verde) 20%, #000) !important; }
tbody tr.celeste { background: color-mix(in oklab, var(--celeste) 18%, #000) !important; }
tbody tr.amarillo{ background: color-mix(in oklab, var(--amarillo) 22%, #000) !important; }
tbody tr.rojo    { background: color-mix(in oklab, var(--rojo) 22%, #000) !important; }
tbody tr.gris    { background: color-mix(in oklab, var(--gris) 16%, #000) !important; }

tbody tr.verde td,
tbody tr.celeste td,
tbody tr.amarillo td,
tbody tr.rojo td,
tbody tr.gris td{
  border-bottom-color: rgba(255,255,255,.06);
}

/* --------- Footer --------- */
.footer{
  display:flex; gap:8px; align-items:center;
  justify-content:space-between;
  color:var(--soft);
  margin-top:10px;
}

/* --------- Responsive --------- */
@media (min-width: 860px){
  header{ grid-template-columns: 1fr auto; }
}

/* ===== Tabla clara (parche semáforo) ===== */
.tableWrap { background:#fff; border:1px solid #ccc; }
table { background:#fff; color:#000; }

thead th{
  background:#f2f2f2;
  color:#000;
  border-bottom:1px solid #ccc;
}

/* Clave: que el <td> NO tenga fondo */
tbody td{
  color:#000;
  border-bottom:1px solid #ddd;
  background: transparent !important;
}

/* Alternado base (lo pisa el semáforo cuando aplica) */
tbody tr:nth-child(odd){  background:#fff; }
tbody tr:nth-child(even){ background:#f9f9f9; }

/* Semáforo con mezcla pensada para fondo claro */
tbody tr.verde   { background: color-mix(in oklab, var(--verde) 18%, #fff) !important; }
tbody tr.celeste { background: color-mix(in oklab, var(--celeste) 18%, #fff) !important; }
tbody tr.amarillo{ background: color-mix(in oklab, var(--amarillo) 22%, #fff) !important; }
tbody tr.rojo    { background: color-mix(in oklab, var(--rojo) 22%, #fff) !important; }
tbody tr.gris    { background: color-mix(in oklab, var(--gris) 16%, #fff) !important; }
